---
meta:
  title: Repeated field names (Remix Validated Form)
---

import { CodeExample } from "~/components/CodeExample";
import Demo, { action } from "~/examples/checkboxGroups";

export { action };

# Repeated field names

There are some situations where you might want to have multiple inputs with the same name.
A common use-case for this would be groups of checkboxes.
The way this is handled in `remix-validated-form`,
is that any fields that are submitted with the same name will be grouped together as an array.
If only one field is submitted for a given name, then it will be treated as a single value.

## Example:

```tsx
const inputs = (
  <>
    <input
      type="checkbox"
      name="myCheckboxGroup"
      value="value1"
    />
    <input
      type="checkbox"
      name="myCheckboxGroup"
      value="value2"
    />
  </>
);

// If both are checked
const result = {
  myCheckboxGroup: ["value1", "value2"],
};

// If only one is checked
const result = {
  myCheckboxGroup: "value1",
};
```

## Validating

When constructing your validation schema, you need to keep in mind that
the value could be an array _or_ a single value.
This example validator uses `z.preprocess` to turn the value into an array before validating.

```ts
export const validator = withZod(
  z.object({
    myCheckboxGroup: z.preprocess((val) => {
      if (Array.isArray(val)) return val;
      if (val) return [val];
      return [];
    }, z.array(z.string())),
  })
);
```

## Writing a Checkbox component

Normally, we would spread `getInputProps` into the `input` to automatically validate.
This is probably not going to result in good UX for checkboxes though.
With checkboxes, it's often enough to only integrate `defaultValues`.
The way we do this is going to depend a lot on what you're using your checkbox for.
If you're using a validator like the one above in order to use repeated fields,
the type of the `defaultValue` will be an array.

```tsx
export type CheckboxProps = {
  label: string;
  name: string;
  value?: string;
};

export const Checkbox: FC<CheckboxProps> = ({
  label,
  name,
  value,
}) => {
  const { defaultValue } = useField(name);
  return (
    <label>
      {label}
      <input
        type="checkbox"
        name={name}
        value={value}
        defaultChecked={defaultValue.includes(value)}
      />
    </label>
  );
};
```

## Full example

<CodeExample>
  <Demo />

```tsx file=~/examples/checkboxGroups.tsx

```

</CodeExample>
